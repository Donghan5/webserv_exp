http {
    root               ./www;  
    client_max_body_size 10m;  
    
    error_page 400 /default_errors/400.html;
    error_page 401 /default_errors/401.html;
    error_page 402 /default_errors/402.html;
    error_page 403 /default_errors/403.html;
    error_page 404 /default_errors/404.html;
    error_page 405 /default_errors/405.html;
    error_page 406 /default_errors/406.html;
    error_page 407 /default_errors/407.html;
    error_page 408 /default_errors/408.html;
    error_page 500 /default_errors/500.html;
    error_page 502 /default_errors/502.html;
    error_page 503 /default_errors/503.html;
    error_page 504 /default_errors/504.html;
    
    index index.html index.htm;
    
    server {
        listen         8080;
        server_name    localhost 127.0.0.1;
        
        location / {
            root       ./www;
            index      index.html index.htm;
            autoindex  on; 
            
            allowed_methods GET POST DELETE;
        }
        
        location /cgi-bin/ {
            root            ./www;
            allowed_methods GET POST DELETE;
                        
            upload_store    ./uploads;
        }
        
        location /static/ {
            root           ./www;
            allowed_methods GET;
        }
        
        location /images/ {
            root           ./www;
            allowed_methods GET;
        }
        
        location = /404.html {
            root   ./www/default_errors;
        }
    }
    
    server {
        listen         8081;
        server_name    test.local;
        
        return 301 http://localhost:8080$request_uri;
    }
}